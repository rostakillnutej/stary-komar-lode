<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8">
    <title>Loďe</title>
    <link rel="stylesheet" type="text/css" href="./assets/global.css">
    <script src="./assets/axios.min.js"></script>
    <script src="./scripts/events.js" defer></script>
    <script>
    window.onload = async function() {
      let res = false;
      try {
        res = await getLobby();
      } catch {
        res = false;
      }
      if(res && res.data.length > 0){
        for(let i=0;i<res.data.length;i++){
          let item = document.createElement("div");
          item.setAttribute("class","item")
          item.innerHTML = `
            <div class="id">
            ${res.data[i][0]}
            </div>
            <div class="name">
            ${res.data[i][1]}
            </div>
            <div class="button">
            <button onclick="connect(${res.data[i][0]})">Připojit</button>
            </div>
          `
          $('#lobbies').appendChild(item);
        }
      } else {
        $('#lobbies').innerHTML = '<p>Zatím zde nejsou místnosti</p>'
      }
    };
    </script>
  </head>
  <body>
    <div class="l-header">Lobby na připojení</div>
    <form onsubmit="createLobby(event)">
    <input id="name" type="text" placeholder="Název">
    <button type="submit">Přidat</button>
    </form>
    <div id="lobbies" class="l-list">
    </div>
  </body>
</html>
